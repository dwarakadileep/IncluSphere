<!DOCTYPE html>
<html>
<head>
    <title>Create Super Admin - GECT Club Hub</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #2563eb, #7c3aed);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            width: 400px;
            text-align: center;
        }
        h1 {
            color: #111827;
            margin-bottom: 20px;
        }
        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin: 10px 0;
            transition: background 0.2s;
        }
        button:hover {
            background: #1d4ed8;
        }
        .success {
            background: #dcfce7;
            color: #166534;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }
        .error {
            background: #fee2e2;
            color: #dc2626;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }
        .note {
            color: #6b7280;
            font-size: 14px;
            margin-top: 20px;
        }
        a {
            color: #2563eb;
            text-decoration: none;
        }
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>
</head>
<body>
    <div class="container">
        <h1>Create Super Admin</h1>
        <p>Email: <strong>admin@gect.edu</strong><br>Password: <strong>admin123</strong></p>
        
        <button onclick="createAdmin()">Create Super Admin</button>
        <div id="message"></div>
        
        <div class="note">
            <a href="index.html">Go to Login</a>
        </div>
    </div>

    <script>
    async function createAdmin() {
        const msg = document.getElementById('message');
        msg.innerHTML = 'Processing...';
        
        try {
            // Try to sign in to check if admin exists
            try {
                const existingUser = await auth.signInWithEmailAndPassword('admin@gect.edu', 'admin123');
                // If we get here, admin exists - try to delete it
                msg.innerHTML = 'Existing admin found. Attempting to delete...';
                
                // Delete the existing user from Authentication
                await existingUser.user.delete();
                
                // Also delete from database if exists
                const snapshot = await database.ref('users').orderByChild('email').equalTo('admin@gect.edu').once('value');
                if (snapshot.exists()) {
                    for (let key in snapshot.val()) {
                        await database.ref(`users/${key}`).remove();
                    }
                }
                
                msg.innerHTML = 'Old admin removed. Creating new one...';
            } catch (e) {
                // Admin doesn't exist, that's fine
                console.log('No existing admin found');
            }
            
            // Create fresh admin in Authentication
            const userCredential = await auth.createUserWithEmailAndPassword('admin@gect.edu', 'admin123');
            
            // Save to Realtime Database
            await database.ref('users').push({
                email: 'admin@gect.edu',
                name: 'Website Admin',
                role: 'super-admin',
                createdAt: new Date().toLocaleDateString()
            });
            
            msg.innerHTML = '<div class="success">✅ Super admin created successfully!<br><a href="index.html">Login Now</a></div>';
            
        } catch (error) {
            msg.innerHTML = `<div class="error">❌ Error: ${error.message}</div>`;
        }
    }
    </script>
</body>
</html>